<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ãƒˆãƒ©ãƒ–ãƒ«å¯¾å¿œæ–‡æ›¸ã®â€œå®‰å…¨ãªä¸‹æ›¸ãä½“é¨“â€ï¼ˆãƒ‡ãƒ¢ï¼‰</title>
  <style>
    body {
      font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,
        "Hiragino Kaku Gothic ProN","Noto Sans JP",Meiryo,sans-serif;
      margin: 0;
      background:#f7f7f7;
      color:#111;
      font-size: 15px;
    }
    .wrap { max-width: 980px; margin: 0 auto; padding: 18px; }
    .card {
      background:#fff; border-radius: 14px; padding: 18px;
      box-shadow: 0 6px 18px rgba(0,0,0,.06);
      margin-bottom: 14px;
    }
    h1 { font-size: 20px; margin: 0 0 10px; }
    h2 { font-size: 14px; margin: 18px 0 8px; }
    .muted { color:#555; font-size: 12px; line-height: 1.6; }
    .row { display:flex; gap:12px; flex-wrap: wrap; }
    .col { flex:1; min-width: 290px; }
    label { display:block; font-size: 12px; margin: 10px 0 6px; color:#333; }
    textarea {
      width:100%; min-height: 140px; border:1px solid #ddd; border-radius: 10px;
      padding: 10px; font-size: 14px; line-height: 1.6; resize: vertical;
    }
    .btns { display:flex; gap:10px; flex-wrap: wrap; margin-top: 10px; align-items:center; }
    button { border:0; border-radius: 10px; padding: 10px 12px; font-size: 14px; cursor:pointer; }
    .primary { background:#111; color:#fff; }
    .ghost { background:#eee; color:#111; }
    .warn { background:#fff5f5; border:1px solid #ffd0d0; }
    .pill {
      display:inline-block; font-size: 11px; padding: 3px 8px;
      border-radius: 999px; background:#f0f0f0; margin-right: 6px;
    }
    pre {
      white-space: pre-wrap; word-break: break-word;
      background:#0b0b0b; color:#eaeaea;
      padding: 12px; border-radius: 12px; margin: 0;
      font-size: 13px; line-height: 1.7;
    }
    .footerQ {
      font-size: 13px; padding: 10px 12px; border-radius: 12px;
      background:#f2f7ff; border:1px solid #dbe9ff;
      line-height: 1.6;
    }
    .small { font-size: 11px; color:#666; }
    .hr { height:1px; background:#eee; margin: 12px 0; }

    /* ========= ã‚¹ãƒãƒ›è¡¨ç¤ºã®å¯èª­æ€§ã‚¢ãƒƒãƒ—ï¼ˆæœ€å°èª¿æ•´ï¼‰ ========= */
    @media (max-width: 768px) {
      body { font-size: 16px; }
      .wrap { padding: 14px; }
      h1 { font-size: 22px; }
      h2 { font-size: 16px; }
      .muted { font-size: 13px; line-height: 1.7; }
      label { font-size: 13px; }
      textarea { font-size: 16px; line-height: 1.7; }
      pre { font-size: 14px; line-height: 1.8; }
      .footerQ { font-size: 14px; line-height: 1.7; }
      button { font-size: 15px; padding: 11px 12px; }
      .pill { font-size: 12px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <h1>ãƒˆãƒ©ãƒ–ãƒ«å¯¾å¿œæ–‡æ›¸ã®â€œå®‰å…¨ãªä¸‹æ›¸ãä½“é¨“â€ï¼ˆãƒ‡ãƒ¢ï¼‰</h1>
      <div class="muted">
        <span class="pill">ç”¨é€”å›ºå®šï¼šè¬ç½ªãƒ¡ãƒ¼ãƒ«</span>
        <span class="pill">å‡ºåŠ›å›ºå®šï¼šäº‹å‹™å¯¾å¿œãƒˆãƒ¼ãƒ³</span>
        <span class="pill">å…¥åŠ›ï¼šéŸ³å£° / æ‰‹å…¥åŠ›</span>
      </div>
      <div class="hr"></div>
      <div class="muted">
        ã“ã®ä½“é¨“ã¯ <b>ã€Œç¤¾å†…ãƒ«ãƒ¼ãƒ«ãŒæœªæ•´ç†ãªçŠ¶æ…‹ã€</b>ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚<br/>
        <b>â€»æœ¬ãƒ‡ãƒ¢ã§ã¯ä»¥ä¸‹ã‚’â€œå…¥åŠ›ã—ãªã„å‰æâ€</b>ã§è¨­è¨ˆã—ã¦ã„ã¾ã™ï¼šå€‹äººåï¼é¡§å®¢é€£çµ¡å…ˆï¼ä½æ‰€ï¼å¥‘ç´„å†…å®¹ãƒ»é‡‘é¡ï¼è­˜åˆ¥å¯èƒ½ãªå›ºæœ‰æƒ…å ±ï¼ˆæ¡ˆä»¶åãªã©ï¼‰
      </div>
    </div>

    <div class="row">
      <div class="card col">
        <h2>å…¥åŠ›ï¼ˆéŸ³å£° / æ‰‹å…¥åŠ›ï¼‰</h2>
        <div class="muted">
          <b>æ–‡ç« ã«ã›ãšã€ã„ã¤ãƒ»ä½•ãŒèµ·ããŸã‹ãƒ»ç›¸æ‰‹ãŒä½•ã‚’æ±‚ã‚ã¦ã„ã‚‹ã‹</b>ã‚’ã€äº‹å®Ÿãƒ™ãƒ¼ã‚¹ã§ãã®ã¾ã¾å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
        </div>

        <label>éŸ³å£°å…¥åŠ›ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œæ™‚ã®ã¿ï¼‰</label>
        <div class="btns">
          <button class="primary" id="startRec">ğŸ¤ éŸ³å£°å…¥åŠ›ã‚’é–‹å§‹</button>
          <button class="ghost" id="stopRec" disabled>â–  åœæ­¢</button>
          <span class="small" id="recStatus"></span>
        </div>

        <label for="input">ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›</label>
        <textarea id="input" placeholder="ä¾‹ï¼‰æ˜¨æ—¥ã®ç´å“ãŒé–“ã«åˆã‚ãšã€å…ˆæ–¹ã‹ã‚‰é›»è©±ã§å¼·ã„æŒ‡æ‘˜ã€‚ç›¸æ‰‹ã¯ã€ã„ã¤ç´å“ã§ãã‚‹ã®ã‹ã¨ã€ä»Šå¾Œã®é€£çµ¡é »åº¦ã‚’æ±‚ã‚ã¦ã„ã‚‹ã€‚"></textarea>

        <div class="btns">
          <button class="primary" id="gen">ä¸‹æ›¸ãã‚’ä½œæˆï¼ˆãƒ‡ãƒ¢ï¼‰</button>
          <button class="ghost" id="clear">ã‚¯ãƒªã‚¢</button>
        </div>

        <div class="card warn" style="margin-top:12px;">
          <div class="muted">
            <b>å…¥åŠ›ç¦æ­¢ï¼ˆä½“é¨“ç”¨ã®ä»®ãƒ«ãƒ¼ãƒ«ï¼‰</b><br/>
            å€‹äººåãƒ»ç¤¾åãƒ»ä½æ‰€ãƒ»é›»è©±ãƒ»ãƒ¡ãƒ¼ãƒ«ãƒ»å¥‘ç´„å†…å®¹ãƒ»é‡‘é¡ãƒ»æ¡ˆä»¶åãªã©ã¯å…¥ã‚Œãšã«å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
          </div>
        </div>
      </div>

      <div class="card col">
        <h2>å‡ºåŠ›ï¼ˆã‚³ãƒ”ãƒšã—ã¦ä½¿ãˆã‚‹ä½“è£ï¼‰</h2>
        <pre id="output">ã“ã“ã«å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚</pre>

        <div class="btns" style="margin-top:10px;">
          <button class="primary" id="copy">å‡ºåŠ›ã‚’ã‚³ãƒ”ãƒ¼</button>
        </div>

        <div class="footerQ" style="margin-top:12px;">
          <b>ã“ã®å“è³ªã‚’ã€ã€Œå…¥åŠ›ãƒ«ãƒ¼ãƒ«ä»˜ãã€ã§ç¤¾å“¡ãŒå‡ºã›ã‚‹ãªã‚‰ã€ç¤¾å†…ã§ä½¿ãˆãã†ã§ã™ã‹ï¼Ÿ</b><br/>
          ã‚‚ã—é›£ã—ã‘ã‚Œã°ã€æ‡¸å¿µã¯ã©ã“ã§ã™ã‹ï¼Ÿï¼ˆæƒ…å ±ï¼è²¬ä»»ï¼é‹ç”¨ï¼‰
        </div>

        <div class="muted" style="margin-top:10px;">
          â€»ã“ã®ãƒ‡ãƒ¢ã¯æ“¬ä¼¼ç”Ÿæˆã§ã™ã€‚å®Ÿé‹ç”¨ã§ã¯ã€Œå…¥åŠ›ç¦æ­¢ã€ã€Œç¢ºèªæ‰‹é †ã€ã€Œå¯¾è±¡æ¥­å‹™ã€ã‚’æœ€åˆã«æ±ºã‚ã¾ã™ã€‚
        </div>
      </div>
    </div>

    <div class="card">
      <h2>æ±ºè£è€…å‘ã‘ï¼šã“ã®ä½“é¨“ã®è¦‹ã©ã“ã‚ï¼ˆ1åˆ†èª¬æ˜ï¼‰</h2>
      <div class="muted">
        â‘  ç¾å ´ã®è’ã„å…¥åŠ›ã‚’ã€å¯¾å¤–æ–‡æ›¸ã®ä½“è£ã«æ•´ãˆã‚‹ï¼ˆå“è³ªãƒ–ãƒ¬ã‚’æ¸›ã‚‰ã™ï¼‰<br/>
        â‘¡ â€œå…¥åŠ›ç¦æ­¢ã®ä»®ãƒ«ãƒ¼ãƒ«â€ä»˜ãã§ã€äº‹æ•…ãƒªã‚¹ã‚¯ã‚’æœ€å°åŒ–ã™ã‚‹è¨­è¨ˆã«ã—ã¦ã„ã‚‹<br/>
        â‘¢ ç¤¾å†…å°å…¥ã¯ã€ç¦æ­¢æƒ…å ±ãƒ»ç¢ºèªæ‰‹é †ãƒ»å¯¾è±¡æ¥­å‹™ã®3ç‚¹ã‚’æ±ºã‚ã‚Œã°å›ã›ã‚‹
      </div>
    </div>
  </div>

  <script>
  (() => {
    const input = document.getElementById('input');
    const output = document.getElementById('output');
    const recStatus = document.getElementById('recStatus');
    const startRec = document.getElementById('startRec');
    const stopRec = document.getElementById('stopRec');

    // --- æ“¬ä¼¼ç”Ÿæˆï¼ˆå•†è«‡ç”¨ãƒ‡ãƒ¢ï¼‰ ---
    function pseudoGenerate(text) {
      const now = new Date();
      const y = now.getFullYear();
      const m = String(now.getMonth() + 1).padStart(2, '0');
      const d = String(now.getDate()).padStart(2, '0');

      const cleaned = (text || "").trim();
      const thin = cleaned.length < 40;

      const subject = "ã€ãŠè©«ã³ã€‘å¯¾å¿œã®é…ã‚Œã«é–¢ã™ã‚‹ã”é€£çµ¡";

      if (thin) {
        return `${subject}

ã„ã¤ã‚‚ãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™ã€‚
æ ªå¼ä¼šç¤¾â–³â–³ã®â–¡â–¡ã§ã™ã€‚

ã“ã®ãŸã³ã¯ã€å¯¾å¿œãŒé…ã‚Œã¦ãŠã‚Šã€ã”è¿·æƒ‘ã‚’ãŠã‹ã‘ã—ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚
ç¾åœ¨ã€çŠ¶æ³ã‚’ç¢ºèªã®ã†ãˆå¯¾å¿œã‚’é€²ã‚ã¦ãŠã‚Šã¾ã™ã€‚

ç¢ºèªã§ãæ¬¡ç¬¬ã€é€²æ—ã¨è¦‹è¾¼ã¿ï¼ˆã„ã¤ã¾ã§ã«ä½•ãŒã§ãã‚‹ã‹ï¼‰ã‚’ã‚ã‚‰ãŸã‚ã¦ã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚
ä½•å’ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚`;
      }

      const bullets = cleaned
        .split(/\n+/)
        .map(s => s.trim())
        .filter(Boolean)
        .slice(0, 6)
        .map(s => "ãƒ»" + s)
        .join("\n");

      return `${subject}

ã„ã¤ã‚‚ãŠä¸–è©±ã«ãªã£ã¦ãŠã‚Šã¾ã™ã€‚
æ ªå¼ä¼šç¤¾â–³â–³ã®â–¡â–¡ã§ã™ã€‚

ã“ã®ãŸã³ã¯ã€ä¸‹è¨˜ã®ä»¶ã«ã¤ãã¾ã—ã¦ã€äºˆå®šé€šã‚Šã®å¯¾å¿œãŒã§ããšã”è¿·æƒ‘ã‚’ãŠã‹ã‘ã—ã€èª ã«ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚

ã€çŠ¶æ³ï¼ˆè¦ç‚¹ï¼‰ã€‘
${bullets}

ç¾åœ¨ã€çŠ¶æ³ã‚’ç¢ºèªã®ã†ãˆå¯¾å¿œã‚’é€²ã‚ã¦ãŠã‚Šã¾ã™ã€‚
æœ¬æ—¥ï¼ˆ${y}/${m}/${d}ï¼‰ä¸­ã«ã€é€²æ—ã¨ä»Šå¾Œã®è¦‹è¾¼ã¿ã‚’ã‚ã‚‰ãŸã‚ã¦ã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚

ã”è¿·æƒ‘ã‚’ãŠã‹ã‘ã—ã¦ãŠã‚Šã¾ã™ã“ã¨ã‚’ãŠè©«ã³ç”³ã—ä¸Šã’ã¾ã™ã€‚`;
    }

    document.getElementById('gen').addEventListener('click', () => {
      output.textContent = pseudoGenerate(input.value);
    });

    document.getElementById('clear').addEventListener('click', () => {
      input.value = "";
      output.textContent = "ã“ã“ã«å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚";
    });

    document.getElementById('copy').addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(output.textContent);
        alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚");
      } catch (e) {
        alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸï¼ˆãƒ–ãƒ©ã‚¦ã‚¶è¨­å®šã‚’ã”ç¢ºèªãã ã•ã„ï¼‰ã€‚");
      }
    });

    // --- éŸ³å£°å…¥åŠ›ï¼ˆWeb Speech APIï¼‰ ---
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    let recognition = null;

    if (!SpeechRecognition) {
      startRec.disabled = true;
      recStatus.textContent = "ï¼ˆã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŸ³å£°å…¥åŠ›ã«éå¯¾å¿œã§ã™ï¼‰";
    } else {
      recognition = new SpeechRecognition();
      recognition.lang = 'ja-JP';
      recognition.interimResults = true;
      recognition.continuous = true;

      let finalText = "";

      recognition.onstart = () => {
        recStatus.textContent = "éŒ²éŸ³ä¸­â€¦ï¼ˆåœæ­¢ã‚’æŠ¼ã™ã¾ã§ç¶šãã¾ã™ï¼‰";
        startRec.disabled = true;
        stopRec.disabled = false;
      };

      recognition.onend = () => {
        recStatus.textContent = "åœæ­¢ã—ã¾ã—ãŸã€‚";
        startRec.disabled = false;
        stopRec.disabled = true;
      };

      recognition.onerror = (e) => {
        recStatus.textContent = "ã‚¨ãƒ©ãƒ¼: " + e.error;
        startRec.disabled = false;
        stopRec.disabled = true;
      };

      recognition.onresult = (event) => {
        let interim = "";
        for (let i = event.resultIndex; i < event.results.length; i++) {
          const transcript = event.results[i][0].transcript;
          if (event.results[i].isFinal) {
            finalText += transcript + "\n";
          } else {
            interim += transcript;
          }
        }
        input.value = (finalText + interim).trim();
      };

      startRec.addEventListener('click', () => {
        finalText = input.value ? (input.value.trim() + "\n") : "";
        recognition.start();
      });

      stopRec.addEventListener('click', () => {
        recognition.stop();
      });
    }
  })();
  </script>
</body>
</html>
